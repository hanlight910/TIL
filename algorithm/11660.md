---
id: "11660"
aliases: []
tags: []
---

# Reflection

## ğŸ’³ ë¬¸ì œì´í•´

N x N ë§¤íŠ¸ë¦­ìŠ¤, ì •ìˆ˜ë¡œ ì±„ì›Œì§„ í‘œê°€ ì£¼ì–´ì¡Œì„ ë•Œ, íšŸìˆ˜ `M`ê°œì˜ ì¿¼ë¦¬ê°€ ì£¼ì–´ì§€ë©°,
ê° ì¿¼ë¦¬ëŠ” ($x_i, y_i$)ë¶€í„° ($x_j, y_j$) ê¹Œì§€ì˜ ë¶€ë¶„ ê·¸ë¦¬ë“œ ë‚´ì˜ í•©ì„ êµ¬í•˜ì„¸ìš”.

## ğŸš¥ ë¬¸ì œì ‘ê·¼

ê° í–‰ê³¼ ì—´ì„ ë”í•˜ì—¬ ê° ì¿¼ë¦¬(êµ¬ê°„)ì˜ í•©ì„ êµ¬í•  ìˆ˜ ìˆì§€ë§Œ ì‹œê°„ ë³µì¡ë„ëŠ” ìµœëŒ€ $O\
(N^N)$ì´ë‚˜ì˜µë‹ˆë‹¤. ë‹¤ë§Œ Nì´ 1024 ì‘ì€ ìˆ˜ì—¬ì„œ ì´ëŒ€ë¡œ ì‚¬ìš©í•´ë„ ë  ê±° ê°™ì§€ë§Œ, ì¿¼ë¦¬
ê°œìˆ˜, Mì´ ìµœëŒ€ 100,000 ì´ë¯€ë¡œ ê° ì¿¼ë¦¬ë§ˆë‹¤ í•´ë‹¹ ë°©ë²•ì„ ì‚¬ìš©í•˜ê¸°ì—ëŠ” ì‹œê°„ ë³µì¡ë„
$O(M \times N^2)$ë¡œ ë§ì´ ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤.

Nì´ ë¹„êµì  ì‘ì€ ìˆ˜ë¼ëŠ” ê²ƒì„ ì•Œì•˜ìœ¼ë‹ˆ N * N ì„ ëŒë ¤ ëˆ„ì í•©(prefix sum)ì„ ë¯¸ë¦¬
êµ¬í•œ ë‹¤ìŒì— ê³„ì‚°í•œ ë‹¤ìŒì— ì‹œê°„ ë³µì¡ë„ $O(M)$ë¥¼ ê¸°ë¡í• ë ¤ê³  ë§Œë“¤ê² ìŠµë‹ˆë‹¤.

### 1ï¸âƒ£  ë¬¸ì œí’€ì´

1. ë©”íŠ¸ë¦­ìŠ¤ ëˆ„ì í•©(prefix_sum) êµ¬í•˜ê¸°

- ì‚¬ìš©í•  ìë£Œ êµ¬ì¡°ëŠ” 2ì°¨ì› ë°°ì—´, ë©”ë¥´ë¦­ìŠ¤ì— ì£¼ì–´ì§„ í–‰, ì—´ ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
- ëˆ„ì ‘í•©ì€ `prefix_sum` 2ì°¨ì› ë°°ì—´ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

í–‰, ì—´ì˜ ëˆ„ê³„í•©ì€ ì´ì „ í–‰ì˜ ëˆ„ê³„í•©, ì´ì „ ì—´ì˜ ëˆ„ê³„í•© ê·¸ë¦¬ê³  í˜„ì¬ ë©”íŠ¸ë¦­ìŠ¤ ì›ì†Œì˜ í•©ê³„ì…ë‹ˆë‹¤.

index<br/>i/j| 0 | 1 | 2 | 3
:---:|:---:|:---:|:---:|:---:
0 | 1 | 2 | 3 | 4
1 | 2 | 3 | 4 | 5
2 | 3 | 4 | 5 | 6
3 | 4 | 5 | 6 | 7

**ê³µì‹**:
$$í˜„ì¬\ ì›ì†Œì˜\ ëˆ„ê³„í•© = í˜„ì¬\ ì›ì†Œì˜\ ê°’ + ì´ì „\ í–‰ì˜\ ëˆ„ê³„í•© + ì´ì „\ ì—´ì˜\ ëˆ„ê³„í•© - ì´ì „\ í–‰/ì—´ì˜\ ëˆ„ê³„í•©(ì¤‘ë³µ ë°©ì§€)$$

index<br/>i/j| 0 | 1 | 2 | 3
:---:|:---:|:---:|:---:|:---:
0 | 1 | 3 | 6 | 10
1 | 3 | 8 | 15 | 24
2 | 6 | 15 | 27 | 42
3 | 10 | 24 | 42 | 64


**ì˜ˆì‹œ**:
- ì¸ë±ìŠ¤ [1, 1] ì˜ ëˆ„ê³„ í•©ì€ [0, 0] + [0, 1] + [1, 0] + [1, 1] ì…ë‹ˆë‹¤.
- ê³µì‹ ì‹¤í–‰: 
    - ëˆ„ê³„í•©[1, 1] = 3 + (1 + 2) + (1 + 2) - 1;
        - 1ì´ ë‘ë²ˆ ë”í•´ì§€ê¸° ë•Œë¬¸ì— ë¹¼ì¤ë‹ˆë‹¤.
- ëˆ„ê³„í•©[1, 1] = 1 + 2 + 2 + 3 = 8

##### 2. êµ¬ê°„ í•© êµ¬í•˜ê¸°

ì¼ì°¨ì› ìˆ˜ì—´ì´ë©´, ë§ˆì§€ë§‰ êµ¬ê°„ì˜ ëˆ„ê³„ í•© - ì‹œì‘í•˜ëŠ” êµ¬ê°„ ì´ì „ ëˆ„ê³„í•©ì„ ê³„ì‚°í•´ì£¼ë©´ ë˜ì§€ë§Œ,

```mermaid 
flowchart LR
1 --> 5 --> 6 --> 8
```

[2ë²ˆì§¸, 4ë²ˆì§¸]êµ¬ê°„ì˜ í•© =  4ë²ˆì§¸ ì›ì†Œì— ëˆ„ê³„í•©(1 + 5 + 6 + 8) - 2ë²ˆì§¸ `ì´ì „` ì›ì†Œì˜ ëˆ„ê³„í•©(1) = 19

<style>
    :root {
        --highlight-bg: #6666FF;
        --highlight-padding: 10px;
        --highlight-width: 10px;
        --highlight-height: 30px;

    }

    .highlight {
        background-color: var(--highlight-bg);
        padding: var(--highlight-padding);
        width: var(--highlight-width);
        height: var(--highlight-height);
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        box-sizing: border-box;
    }
</style>

<style> 
    :root {
        --highlight-minus-bg: #808080;
        --highlight-padding: 10px;
        --highlight-width: 10px;
        --highlight-height: 30px;
    }

    .highlight-minus {
        background-color: var(--highlight-minus-bg);
        padding: var(--highlight-padding);
        width: var(--highlight-width);
        height: var(--highlight-height);
        align-items: center;
        justify-content: center;
        text-align: center;
        display: flex;
    }
</style>
<div>

index<br/>i/j| 0 | 1 | 2 | 3
:---:|:---:|:---:|:---:|:---:
0 | <div class="highlight-minus">1</div> | <div class="highlight-minus">2</div> | <div class="highlight-minus">3</div> | 4
1 | <div class="highlight-minus">2</div> | <div class="highlight">3</div> | <div class="highlight">4</div> | 5
2 | <div class="highlight-minus">3</div> | <div class="highlight">4</div> |<div class="highlight"> 5</div> | 6
3 | <div class="highlight-minus">4</div> | <div class="highlight">5</div> | <div class="highlight">6</div> | 7

í‘œ(ë©”íŠ¸ë¦­ìŠ¤)ëŠ” êµ¬ê°„ì´ ì¸ë±ìŠ¤[i, j] ê¸°ì¤€:
- [1, 1] ë¶€í„° [2, 3]ì´ë©´,
- [0, 0], [0, 1], [0, 2], [1, 0], [2, 0], [3, 0]ì„ ëˆ„ê³„í•©[3, 2]ì—ì„œ ë¹¼ì•¼ í•©ë‹ˆë‹¤.

</div>

í‘œë¥¼ ë³´ì‹œ ëŒ€ì¶© ì–´ë””ë¥¼ ë¹¼ì•¼ í•˜ëŠ”ì§€ ê°ì´ ì¡í™ë‹ˆë‹¤.

**ê³µì‹:**
$$êµ¬ê°„[i, j]ë¶€í„°[x, y] = ëˆ„ê³„í•©[x, y] - ëˆ„ê³„í•©[i - 1, y] - ëˆ„ê³„í•©[x, j - 1] + ëˆ„ê³„í•©[x - 1, y - 1]$$

**ì˜ˆì‹œ:**
- [0, 0], [0, 1], [0, 2]ëŠ” ëˆ„ê³„í•©[0, 2]ìœ¼ë¡œ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- [0, 0], [1, 0], [2, 0], [3, 0]ì€ ëˆ„ê³„í•©[3, 0]ìœ¼ë¡œ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì´ì œ ì´ ê°’ì„ ëˆ„ê³„í•©[3, 2]ì—ì„œ ë¹¼ì¤ë‹ˆë‹¤.
- [0, 0] ì´ ë‘ ë²ˆ ë¹ ì§€ë¯€ë¡œ, ëˆ„ê²Œí•©[1 - 1, 1 - 1]ì¸ [0, 0]ì„ í•œ ë²ˆ ë” í•´ì¤ë‹ˆë‹¤.

ê·¸ëŸ¬ë©´ êµ¬ê°„[1, 1]ë¶€í„° [3, 2]ê¹Œì§€ì˜ í•©ì„ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ì†ŒìŠ¤ ì½”ë“œ(source code)

```py
import sys;
def calculate_prefix_sum(grid, N):
    prefix_sum = [[0] * (N + 1) for _ in range(N + 1)]
    
    for i in range(1, N + 1):
        for j in range(1, N + 1):
            prefix_sum[i][j] = grid[i-1][j-1] + prefix_sum[i-1][j] + prefix_sum[i][j-1] - prefix_sum[i-1][j-1]
    
    return prefix_sum


inputed: list[str]= list(sys.stdin.readline().rstrip().split());

N, M = int(inputed[0]), int(inputed[1]);

matrix: list[list[int]] = [[0 for _ in range(0, N)] for _ in range(0, N)];

for index in range(0, N):
    row: list[str] = list(sys.stdin.readline().rstrip().split());
    for index_j in range(0, N):
        matrix[index][index_j] = int(row[index_j]);


prefix_sum: list[list[int]] = calculate_prefix_sum(matrix, N);

for x in range(0, N):
    for y in range(0, N)
        if x == 0 and y == 0:
            prefix_sum[i][j] = matrix[i][j];
        if x == 0:
            prefix_sum[i][j] = prefix_sum[i][j - 1] + matrix[i][j];
        if y == 0:
            prefix_sum[i][j] = prefix_sum[i - 1][j] + matrix[i][j];
        else:
            prefix_sum[i][j] = matrix[i][j] + prefix_sum[i - 1][j] +
                prefix_sum[i][j - 1] - prefix_sum[i - 1][j - 1];


ranges: list[dict] = list();

for _ in range(0, M):
    inputed: list[str] = list(sys.stdin.readline());
    ranges.append({
        "i": int(inputed[0]),
        "j": int(inputed[1]),
        "x": int(inputed[2]),
        "y": int(inputed[3]),
            });

for range in ranges:
    i: int = range["i"] - 1;
    j: int = range["j"] - 1;
    x: int = range["x"] - 1;
    y: int = range["y"] - 1;

    a: int = prefix_sum[x - 1][y - 1];
    b: int = 0;
    c: int = 0;
    d: int = 0;

    minus_i: int = 1;
    minus_j: int = 1;
    if i == 0:
        minus_i = 0;
    elif j == 0:
        minus_j = 0;

    sum: int = prefix_sum[x][y] - prefix_sum[i - minus_i] - prefix_sum[x][j - minus_j] +
        prefix_sum[i - minus_i][j - minus_j];

    print(sum);
```

ë‹¤ë§Œ ìœ„ì— ì†ŒìŠ¤ ì½”ë“œëŠ” ëˆ„ì í•©ê³„ ë°°ì—´ì´ ì¸ë±ìŠ¤ 0ë¶€í„° ì‹œì‘í•˜ë¯€ë¡œ 0ìœ¼ë¡œ ì‹œì‘í•  ë•Œ
ì˜ˆì˜ ì²˜ë¦¬ë¥¼ í•´ì•¼ í•˜ì§€ë§Œ, ì¸ë±ìŠ¤ i, jê°€ 0ì¼ ë•Œ 0ìœ¼ë¡œ ì´ˆê¸°í™”í•˜ë©´ ì˜ˆì˜ ì²˜ë¦¬ í•  í•„ìš”
ê°‘ ì—†ìŠµë‹ˆë‹¤.

#### â° ì•Œê³ ë¦¬ì¦˜ ë³µì¡ë„

- ì‹œê°„ë³µì¡ë„: $O(n ^ n)$
- ê³µê°„ë³µì¡ë„: $O(n ^ n)$
