---
id: "11444"
aliases: []
tags:
  - ë¶„í• ì •ë³µ
  - fibonacci
---

# ğŸ’³ ë¬¸ì œì´í•´

Nì´ ìµœëŒ€ 10 x 10^19 ì£¼ì–´ì¡Œì„ ë•Œ í”¼ë³´ë‚˜ì¹˜ ìˆ˜ Nì„ êµ¬í•˜ì„¸ìš”.k

# ğŸš¥ ë¬¸ì œì ‘ê·¼

ì¼ë°˜ dpë¥¼ ì‚¬ìš©í•œ í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´ì„ êµ¬í•˜ëŠ” ë°©ë²•ì€
ì‹œê°„ ë³µì¡ë„ $O(N)$ë¥¼ ê¸°ë¡í•˜ì—¬ ì˜¤ë˜ ê±¸ë¦¬ë¯€ë¡œ ë¶„í• ì„ í•˜ë“  íŒ¨í„´ì„ ì°¾ë“  í•´ì„œ, 
ì‹¤í–‰ ì‹œê°„ì„ ì¤„ì—¬ì•¼ í•©ë‹ˆë‹¤.

n | fibonacci(n)
:---:|:---:
0 | 0
1 | 1
2 | 1
3 | 2
4 | 3
5 | 5
6 | 8
7 | 13 
8 | 21
9 | 34
10 | 55

ìœ„ì— ê³¼ì •ì—ì„œ íŒ¨í„´ì„ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.
ëª¨ë¥´ê² ì–´ì„œ gptí•œí…Œ ë¬¼ì–´ë´¤ìŠµë‹ˆë‹¤.

í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´ì˜ ê³µì‹ì€:
$$F(n) = F(n - 1) + F(n - 2)$$

ì´ë¥¼ í–‰ë ¬ë¡œ í‘œí˜„í•˜ë©´ ì´ë ‡ìŠµë‹ˆë‹¤.

$$
\begin{pmatrix}
F(n) \\
F(n-1)
\end{pmatrix}
=
\begin{pmatrix}
1 & 1 \\
1 & 0
\end{pmatrix}^{n-1}
\begin{pmatrix}
F(1) \\
F(0)
\end{pmatrix}
$$

í–‰ë ¬ ê±°ë“­ì œê³±ì„ ì‚¬ìš©í•˜ë©´ í’€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 1ï¸âƒ£  ë¬¸ì œí’€ì´

1. í–‰ë ¬ ê±°ë“­ì œê³±ì„ êµ¬í•©ë‹ˆë‹¤.

```mermaid
flowchart TD
exponent_is_one{if exponentê°€ 1 ì´í•˜ë©´} 
e_t["í˜„ì¬ í–‰ë ¬ì„ ëŒë ¤ì¤ë‹ˆë‹¤."]
e_f["í–‰ë ¬ì§€ìˆ˜ì ˆë°˜ = í–‰ë ¬ì˜ ì§€ìˆ˜ì˜ ì ˆë°˜ì„ êµ¬í•˜ì„¸ìš”"]

if_exp_even{"if ì§€ìˆ˜ê°€ ì§ìˆ˜ë©´"}
even_t["í–‰ë ¬ ì§€ìˆ˜ì ˆë°˜ì„ ë‘ë²ˆ ê³±í•œ í–‰ë ¬ì„ ëŒë ¤ì¤ë‹ˆë‹¤."]
even_f["í–‰ë ¬ ì§€ìˆ˜ì ˆë°˜ì„ ë‘ë²ˆ ê³±í•œ í–‰ë ¬ì„ ì›ë˜ í–‰ë ¬ê³¼
ê³±í•˜ì—¬ ëŒë ¤ì¤ë‹ˆë‹¤."]

exponent_is_one -- true --> e_t
exponent_is_one -- false --> e_f

e_f --> if_exp_even -- true --> even_t 
if_exp_even -- false --> even_f
```

2. í–‰ë ¬ ê³±í•˜ê¸°

<style>
    .arrow {
        height: 0;
        border-style: solid;
        border-top: 5px solid transparent;
        border-bottom: 5px solid transparent;
        border-left: 10px solid #555555;
        border-right: 0;
    }
    .grid-background {
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 10px;
        width: 105%;

        background-color: white;
    }
    .grid-container {
        display: grid;
        grid-template-rows: repeat(4, 20px);
        grid-template-columns: repeat(4, 20px);
        gap: 2px;
        border-radius: 5px;
        margin: 10px
    }

    .box {
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 5px;
        width: 100%;
        height: 100%;
        border: solid;
        font-size: 10px;
        color: black;

    }
    
    .box-gray {
        background-color: gray;
    }

    .box-black {
        background-color: black;
    }

    .box-yellow {
        background-color: yellow;
    }
</style>

<div class="grid-background">
<div class="grid-container">    
    <div class="box box-yellow">1/1</div>
    <div class="box box-gray">1/2</div>
    <div class="box box-gray">1/3</div>
    <div class="box box-gray">1/4</div>
    <div class="box box-gray">2/1</div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-gray">3/1</div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-gray">4/1</div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
</div>
<div class="arrow"></div>
<div class="grid-container">    
    <div class="box box-gray"></div>
    <div class="box box-yellow"></div>
    <div class="box box-gray"></div>
    <div class="box box-gray"></div>
    <div class="box box-black"></div>
    <div class="box box-gray"></div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-gray"></div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-gray"></div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
</div>
<div class="arrow"></div>
<span style="margin: 10px;">...</span>
<div class="arrow"></div>
<div class="grid-container">    
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-gray"></div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-gray"></div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-black"></div>
    <div class="box box-gray"></div>
    <div class="box box-gray"></div>
    <div class="box box-gray"></div>
    <div class="box box-gray"></div>
    <div class="box box-yellow"></div>
</div>
</div>

ì²«ë²ˆì§¸ í–‰ë ¬ì˜ í–‰ê³¼ ë‘ë²ˆì§¸ í˜•ë ¬ì˜ ì—´ì„ ê° ì§ê³¼ ê³±í•´ì¤ë‹ˆë‹¤. ì˜ˆì‹œ, 1/1ì€ 1/1ë¼ë¦¬ ê³±í•˜ê³ , 1/2ì€
2/1 ë¼ë¦¬ ê³±í•œ ê°’ì„ ë”í•´ì¤ë‹ˆë‹¤. ë‹¤ ë”í•œ ê°’ì„ ë…¸ë€ìƒ‰ íƒ€ì¼ ìœ„ì¹˜ì— ì €ì¥í•´ì¤ë‹ˆë‹¤. í•´ë‹¹ ê³¼ì •ì„ ë§ˆì§€ë§‰ì´ ë  ë•Œê¹Œì§€
ë°˜ë³µí•©ë‹ˆë‹¤.

### source code

```c
#include<stdio.h>
#include<stdint.h>
#include<stdlib.h>

#define MODULAR 1000000007
typedef struct {
    int32_t n;
    int32_t** m;
} Matrix;

void initial_matrix(Matrix* a) {
    a->m = (int32_t**)malloc(a->n * sizeof(int32_t*));

    for (int32_t i = 0; i < a->n; i += 1) {
        a->m[i] = (int32_t*)malloc(a->n * sizeof(int32_t));
    }

    a->m[0][0] = 1;
    a->m[0][1] = 1;
    a->m[1][0] = 1;
    a->m[1][1] = 0;
    return;
}

// void print_matrix(Matrix a) {
//     for (int32_t i = 0; i < a.n; i += 1) {
//         for (int32_t j = 0; j < a.n; j += 1) {
//             printf("%d ", a.m[i][j]);
//         }
//         printf("\n");
//     }
// }

Matrix multiple_matrix(Matrix a, Matrix b) {
    Matrix c = { a.n };
	initial_matrix(&c);
	
    for (int32_t i = 0; i < a.n; i += 1) {
        for (int32_t j = 0; j < b.n; j += 1) {
            c.m[i][j] = 0;
            for (int32_t k = 0; k < b.n; k += 1) {
                c.m[i][j] += ((a.m[i][k] % MODULAR) * (int64_t)(b.m[k][j] % MODULAR)) % MODULAR;
            }
			c.m[i][j] %= MODULAR;
        }
    }

    return c;
}

Matrix powerof_matrix(int64_t exponent, Matrix a) {
    if (exponent <= 1) {
		for (int32_t i = 0; i < a.n; i += 1) {
			for (int32_t j = 0; j < a.n; j += 1) {
				a.m[i][j] %= MODULAR;
			}
		}

		return a;
    } 

    Matrix k = powerof_matrix(exponent / 2, a);

	Matrix s = multiple_matrix(k, k);
    if (exponent % 2 == 0) {
		return s;
    } else {
		return multiple_matrix(s, a);
    }
}


int32_t main(void) {
	int64_t n;
    scanf("%ld", &n);
    Matrix a; 

    a.n = 2;
    initial_matrix(&a);
    a = powerof_matrix(n - 1, a);
    printf("%d\n", a.m[0][0]);
    free(a.m);
    return 0;
}
```
