---
id: "3015"
aliases:
  - ì˜¤ì•„ì‹œìŠ¤ ìž¬ê²°í•©
tags:
  - ì˜¤ì•„ì‹œìŠ¤ ìž¬ê²°í•©
  - ìŠ¤íƒ
ref:
  - https://www.acmicpc.net/problem/3015
---

# ðŸ’³ ë¬¸ì œì´í•´

ì •ìˆ˜ N ê°œë¡œ ì£¼ì–´ì§„ ì¤„ì— ì„œ ìžˆëŠ” ì‚¬ëžŒì˜ í‚¤ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ì„œë¡œ ë³¼ ìˆ˜ ìžˆëŠ”
ìŒì˜ ìˆ˜ë¥¼ êµ¬í•˜ëŠ” í”„ë¡œê·¸ëž¨ì„ ìž‘ì„±í•˜ì‹œì˜¤.

# ðŸš¥ ë¬¸ì œì ‘ê·¼


> "Aì™€ Bê°€ ì„œë¡œ ë³¼ ìˆ˜ ìžˆìœ¼ë ¤ë©´, ë‘ ì‚¬ëžŒ ì‚¬ì´ì— A ë˜ëŠ” Bë³´ë‹¤ í‚¤ê°€ í° ì‚¬ëžŒì´ 
ì—†ì–´ì•¼ í•œë‹¤."

Aì™€ B ì„œë¡œ ë³¼ ìˆ˜ ìžˆëŠ” ì¡°ê±´ì€

Aì™€ B ì‚¬ì´ì— ë” í° ìˆ˜ê°€ ì—†ì–´ì•¼ í•©ë‹ˆë‹¤.

**ë³¼ ìˆ˜ ì—†ëŠ” ê²½ìš°**

- 1 3 2
    - 1ê³¼ 2ëŠ” ì„œë¡œ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
- 1 2 3
    - 1ê³¼ 3ì€ ì„œë¡œ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.  
    1ì´ 2ì— ê°€ë ¤ì ¸ ìžˆê¸° ë•Œë¬¸ì—, 1ì€ 3ì„ ë³¼ ìˆ˜ ìžˆì„ì§€ ëª°ë¼ë„, 
    3ì€ 1ì„ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
- 3 2 1
    - 3ê³¼ 1ì€ ì„œë¡œ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.  
    1ì´ 2ì— ê°€ë ¤ì ¸ ìžˆê¸° ë•Œë¬¸ì—, 1ì€ 3ì„ ë³¼ ìˆ˜ ìžˆì„ì§€ ëª°ë¼ë„, 
    3ì€ 1ì„ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

**ë³¼ ìˆ˜ ìžˆëŠ” ê²½ìš°**

- 2 1 3
    - 2ì™€ 3ì€ ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  
    ì‚¬ì´ì— ìžˆëŠ” 1ì€ 2ì™€ 3ë³´ë‹¤ ìž‘ìŠµë‹ˆë‹¤.
- 3 1 2
    - 3ê³¼ 2ëŠ” ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  
    ì‚¬ì´ì— ìžˆëŠ” 1ì€ 2ì™€ 3ë³´ë‹¤ ìž‘ìŠµë‹ˆë‹¤.
- 2 2 3
    - ëì— ìžˆëŠ” 2ì™€ 3ì€ ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.  
    ì¡°ê±´ ìƒ ë³¼ ìˆ˜ ìžˆë‹¤ê³  í•©ë‹ˆë‹¤.

> "1 2 2 ëŠ” ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
- ==1 2 2==
    - ëì— ìžˆëŠ” 1ê³¼ 2ëŠ” ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    ì¡°ê±´ ìƒ ë³¼ ìˆ˜ ìžˆë‹¤ê³  í•©ë‹ˆë‹¤.

ë¬¸ì œë¥¼ ë” ì•Œê¸° ìœ„í•´, ì˜ˆì‹œ ì¼€ì´ìŠ¤ë¥¼ íŒŒë³´ê² ìŠµë‹ˆë‹¤.

## ðŸŒ ì˜ˆì œ

`2 4 1 2 2 5 1`

1. 2ê°€ ë“¤ì–´ì˜µë‹ˆë‹¤.
    - ë¹„êµí•  ëŒ€ìƒì´ ì—†ìŠµë‹ˆë‹¤.
2. 4ê°€ ë“¤ì–´ì˜µë‹ˆë‹¤.
    - 4ëŠ” 2ë³´ë‹¤ í½ë‹ˆë‹¤. ë‘˜ì€ ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - ìŒì˜ ìˆ˜: 1
3. 1ì´ ë“¤ì–´ì™”ìŠµë‹ˆë‹¤.
    - 1ì€ 4ë³´ë‹¤ ìž‘ìŠµë‹ˆë‹¤. ë‘˜ì€ ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - ìŒì˜ ìˆ˜: 2
4.  2ê°€ ë“¤ì–´ì˜µë‹ˆë‹¤.
    - 2ëŠ” 1ë³´ë‹¤ í½ë‹ˆë‹¤. ë‘˜ì€ ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - 2ì™€ 4ì‚¬ì´ì— ìžˆëŠ” 1ì€ 2ì™€ 4ë³´ë‹¤ ìž‘ìŠµë‹ˆë‹¤ ë‘˜ì€ ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - ìŒì˜ ìˆ˜: 4

> "5ë²ˆ ì˜ˆì œë¥¼ ìž˜ ëª» ê³„ì‚°í–ˆìŠµë‹ˆë‹¤. 2ì™€ 1ì€ ì„œë¡œ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. 2ì™€ 4ê°€ ì„œë¡œë¥¼
ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤."
5. 2ê°€ ë“¤ì–´ì˜µë‹ˆë‹¤.
    - 2ëŠ” 2ëž‘ ê°™ìŠµë‹ˆë‹¤. ë‘˜ì€ ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - 2ì™€ 1ì‚¬ì´ì— 2ê°€ ìžˆì§€ë§Œ, ì´ëŠ” 2ë³´ë‹¤ í¬ì§€ ì•Šìœ¼ë¯€ë¡œ ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - ìŒì˜: 6
6. 5ê°€ ë“¤ì–´ì˜µë‹ˆë‹¤.
    - 5ëŠ” 2ë³´ë‹¤ í½ë‹ˆë‹¤. ë‘˜ì€ ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - 5ì™€ 2ì‚¬ì´ì— 2ê°€ ìžˆì§€ë§Œ, 2ë¥¼ ì´ˆê³¼í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ë‘˜ì€ ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - 1ì€ 5ë¥¼ ë³¼ ìˆ˜ ìžˆì§€ë§Œ, 5ëŠ” 2ì— ê°€ë ¤ì ¸ 1ì„ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - 5ì™€ 4 ì‚¬ì´ì—, ë” í° ìˆ˜ëŠ” ì—†ìœ¼ë‹ˆ ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - ìŒì˜ ìˆ˜:  9
7. 1ì´ ë“¤ì–´ì˜µë‹ˆë‹¤.
    - 1ì€ 5ë³´ë‹¤ ìž‘ìŠµë‹ˆë‹¤. ë‘˜ì€ ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - ìŒì˜ ìˆ˜: 10

## ðŸ› ï¸ ë¶„ì„
ì—¬ê¸°ì„¤ ì•Œ ìˆ˜ ìžˆëŠ” ì‚¬ì‹¤ì€ ì´ì „ ì›ì†Œê°€ í˜„ìž¬ ì›Œì†Œë³´ë‹¤ ìž‘ì„ ê²½ìš°
í˜„ìž¬ ì›ì†Œì˜ ì˜í•´ ì´ì „ ì›ì†Œë“¤ì€ ê°€ë ¤ì§€ë¯€ë¡œ, ë” ì´ìƒ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
ê³ ë¡œ ì œê±°í•©ë‹ˆë‹¤.

> 1 < 2 < 3 (1, 2ëŠ” ì´ì œ í•„ìš” ì—†ìŒ)

ë°˜ëŒ€ë¡œ í˜„ìž¬ ì›ì†Œê°€ ì´ì „ ì›ì†Œë³´ë‹¤ ìž‘ìœ¼ë©´ ì–´ë–»ê²Œ í• ê¹Œìš”?
ìŒì˜ ê°œìˆ˜ë§Œ ì¶”ê°€í•˜ê³  ë‹¤ìŒ ì›ì†Œë¥¼ ë°›ìŠµë‹ˆë‹¤.

- ì˜ˆì‹œ í”„ë¡œê·¸ëž¨ì„ ìž‘ì„±í•˜ê³ , í…ŒìŠ¤íŠ¸ í•´ë³´ê² ìŠµë‹ˆë‹¤.

### â‰ï¸  ì˜¤ë¥˜ 

> "ì´ ë¶€ë¶„ì—ì„œ í•˜ëŠ” ë§ì€ ì „ë¶€ ê±°ì§“ìž…ë‹ˆë‹¤."

í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì¤‘ 1 2 2 ê°€ ìžˆì—ˆìŠµë‹ˆë‹¤.
ì´ëŠ” ë§¨ ëì— ìžˆëŠ” 1ê³¼ 2ëŠ” ì„œë¡œ ë³¼ ìˆ˜ ìžˆì—ˆìŠµë‹ˆë‹¤ ê³ ë¡œ 1ì„ ì œê±°í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.

ì´ëŠ” ê°™ì€ í‚¤ë¥¼ ê°€ì§„ ìˆ˜ë“¤ì´ ì¡´ìž¬í•˜ë¯€ë¡œ ì˜ˆì˜ì ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.

1 2 2ë¥¼ ì–´ë–»ê²Œ ì²˜ë¦¬í•´ì•¼ í•  ê²ƒì¸ê°€...

2 ë‹¤ìŒ ì›ì†Œë¥¼ í™•ì¸í•˜ë©´ ë ê¹Œ ì‹¶ì§€ë§Œ, 2ì˜ ê°œìˆ˜ë¥¼ í™•ì¸ í•  ìˆ˜ ì—†ëŠ” ì´ìƒ,
ë‹¤ìŒ ì›ì†Œë¥¼ í™•ì¸í•˜ëŠ” ë°©ì‹ì€ ì ì ˆí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

> 1 < 2 < 2 < 2 ...

ë°˜ëŒ€ë¡œ 2ì˜ ê°œìˆ˜ë¥¼ í™•ì¸í•  ìˆ˜ ìžˆë‹¤ë©´, ì ì ˆí•œ ëŒ€ì‘ì„ í•  ìˆ˜ ìžˆì„ ê±° ê°™ìŠµë‹ˆë‹¤.

1 < 2 < 2 < 2 

1. 1ì´ ë“¤ì–´ì˜µë‹ˆë‹¤.
2. 2ëŠ” 1ë³´ë‹¤ í½ë‹ˆë‹¤. 1ì€ 2ì˜ ê°€ë ¤ì ¸ ë³´ì§€ ëª»í•©ë‹ˆë‹¤.(ê·¸ ë‹¤ìŒì´ 2ì´ë©´, ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.)
    - ìŒì˜ ê°œìˆ˜: 1
3. 2ì™€ 2ëŠ” ê°™ìŠµë‹ˆë‹¤.
    - ê°™ìœ¼ë©´ ì¡°ê±´ ìƒ, ìŒì˜ ê°œìˆ˜ì— ì¶”ê°€í•©ë‹ˆë‹¤.
    - ë‹¤ë§Œ ê·¸ ì´ì „ì— 1ë„ ìžˆìœ¼ë¯€ë¡œ í•˜ë‚˜ ë” ì¶”ê°€í•©ë‹ˆë‹¤.
    - 2ì˜ ê°œìˆ˜ë¥¼ ëŠ˜ë¦½ë‹ˆë‹¤.  
    ì´ëŠ” 2ì˜ ê°œìˆ˜ê°€ ëŠ˜ì–´ë‚˜ë©´, ê·¸ ë§Œí¼ ì¡°í•©ì´ ë§Žì•„ì§€ê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤.
    - ê·¸ë¦¬ê³  2ë¥¼ ì œê±°í•©ë‹ˆë‹¤.
    - 2ì˜ ê°œìˆ˜: 2
    - ìŒì˜ ê°œìˆ˜: 3
4. 2ì™€ 2ëŠ” ê°™ìŠµë‹ˆë‹¤.
    - ê·¸ ì´ì „ ì´ì „ 1ë„ ìžˆìœ¼ë¯€ë¡œ í•˜ë‚˜ ë” ì¶”ê°€í•©ë‹ˆë‹¤.
    - 2ì˜ ê°œìˆ˜ë¥¼ ìŒì˜ ê°œìˆ˜ì— ì¶”ê°€í•©ë‹ˆë‹¤.  
    ì´ëŠ” ì²« ë²ˆì§¸ 2ì™€ í˜„ìž¬ 2, ë‘ ë²ˆì§¸ 2ì™€ í˜„ìž¬ 2ì˜ ìŒìž…ë‹ˆë‹¤.
    (2(1), 2(3)), (2(2), 2(3))
    - ìŒì˜ ê°œìˆ˜: 6

ê²°êµ­ì—ëŠ” ì•ˆ í’€ë ¤ì„œ, ì •ë‹µì§€ë¥¼ ë³´ê³  í’€ì—ˆìŠµë‹ˆë‹¤.

## â˜ ï¸  ì •ë‹µ

ì¢€ í—·ê°ˆë ¸ë˜ ë¶€ë¶„ì´ ì¡°ê±´ì´ ì‚¬ì´ì— ì–´ëŠ í•œ ìª½ì´ë¼ë„ ë” í°ê²Œ ìžˆë”ë¼ë„ ë‹¤ë¥¸ í•œ ìª½ì´
ê°™ìœ¼ë©´ ë³´ì¼ ì¤„ ì•Œì•˜ëŠ”ë° ì•„ë‹ˆë„¤ìš”, ë§ ê·¸ëŒ€ë¡œ a ì™€ b ì‚¬ì´ì— ìžê¸°ë³´ë‹¤ ë” í° ê²Œ ì—†ì–´ì•¼
í•©ë‹ˆë‹¤.

í—·ê°ˆë¦¬ë‹ˆê¹Œ ì •ë¦¬ë¥¼:

- 1 2 2ì—ì„œëŠ” ë§ˆì§€ë§‰ 1ê³¼ 2ëŠ” ì„œë¡œë¥¼ ë³¼ ìˆ˜ ì—†ëŠ”ë°.
- 1 1 2ì—ì„œëŠ” ë§ˆì§€ë§‰ 1ê³¼ 2ëŠ” ì„œë¡œë¥¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ì—¬ê¸°ì„œ Aì™€ B ì‚¬ì´ì— A ë˜ëŠ” B ë³´ë‹¤ í° í‚¤ê°€ ì—†ë‹¤ ë¼ëŠ” ì¡°ê±´ì„ ë§Œì¡±í•©ë‹ˆë‹¤.

- 1 2 2 5 ì—ì„œëŠ” 5ì™€ 1ì´ ì„œë¡œ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë°˜ë©´ ì²« ë²ˆì§¸ 2ì™€ 5ëŠ” ì„œë¡œë¥¼
ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ì´ëŸ¬ë©´, ë¬´ìž‘ì • ìŒì˜ ê°œìˆ˜ì— +1ì„ í•˜ë©´ ì•ˆ ë˜ê² ì£ , 1 < 2 < 2 ë§ˆì§€ë§‰ 2ëŠ” 1ì„ ë³¼ ìˆ˜ 
ì—†ìœ¼ë‹ˆ, +1ì„ í•˜ëŠ” ê²½ìš°ëŠ” 2ë³´ë‹¤ ë” í° ê²½ìš°, ì¦‰ ìŠ¤íƒì— ê°œìˆ˜ê°€ 1ê°œ ë³´ë‹¤ í° ê²½ìš°ìž…ë‹ˆë‹¤.

3 < 2 < 2: 3ì€ 2ë³´ë‹¤ ì»¤ì„œ ì œê±°í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ 2ë¥¼ ì œê±°í•˜ë©´ ìŠ¤íƒ ì›ì†Œì˜
ê°œìˆ˜ëŠ” 2 ì´ìƒìž…ë‹ˆë‹¤.

2 < 2 < 5: ì™€ ê°™ì´ 5ìž…ìž¥ì—ì„œëŠ” 2ë¥¼ ë´¤ë‹¤ëŠ” ê±¸ ì–´ë–»ê²Œ ì¦ëª…í•˜ê³  ìŒì˜ ê°œìˆ˜ë¥¼ ëŠ˜ë¦´ê¹Œìš”?

ì´ëŠ” ê°„ë‹¨í•œ ìˆ˜í•™ìœ¼ë¡œ í•´ê²° í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. 

- 2 < 2 < 2 < 5  
2 ë²ˆì§¸ 2ëŠ” 2ê°€ 2ë²ˆ ì¤‘ë³µëœë‹¤ëŠ” ì‚¬ì‹¤ì„ 3 ë²ˆì§¸ 2ì—ê²Œ ë„˜ê¹ë‹ˆë‹¤. 
3 ë²ˆì§¸ 2 ìž…ìž¥ì—ì„œ ì²« ë²ˆì§¸ 2ì™€ ë‘ ë²ˆì§¸ 2ë¥¼ ì„œë¡œ ë³¼ ìˆ˜ ìžˆìœ¼ë‹ˆ ìŒì˜ 
ê°œìˆ˜ì˜ 2ë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. ê³ ë¡œ ë„˜ê²¨ ë°›ì€ 2ì˜ ìŒì˜ ê°œìˆ˜ì˜ ë”í•©ë‹ˆë‹¤.
ë§ˆì°¬ê°€ì§€ë¡œ ë‹¤ìŒ ì›ì†Œì— í•´ë‹¹ ì¤‘ë³µ ëœ ê°œìˆ˜ì— 1ì„ ë”í•˜ê³ 
ë¥¼ ë„™ê¹ë‹ˆë‹¤. 5 ë˜í•œ ë‚˜ë¨¸ì§€ 2ë“¤ì„ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. 2ì˜ ê°œìˆ˜ëŠ” 3ì´ë‹ˆ,
2ì˜ ê°œìˆ˜ì¸ 3ì„ ìŒì˜ ê°œìˆ˜ì— ë”í•´ ì¤ë‹ˆë‹¤.

### ðŸ–¥ï¸ source code

```c
#include<stdio.h>
#include<stdint.h>
#include<stdlib.h>

typedef struct {
	int32_t val;
	int32_t count;
} pair;

typedef struct {
	pair* arr;
	int32_t top_idx;
} stack;

int32_t is_empty(stack a) {
    return a.top_idx > -1 ? 0 : 1; 
}

int32_t push(stack* a, int32_t value, int32_t cnt_height) {
    a->arr[a->top_idx + 1].val = value; 
    a->arr[a->top_idx + 1].count = cnt_height;
    a->top_idx += 1;
    return 0;
}

int32_t pop(stack* a) {
    a->top_idx -= 1;
    return 0;
}

int32_t peek(stack a) {
    return a.arr[a.top_idx].val;
}

int64_t get_joint_count(int32_t* arr, int32_t length) {
	stack a = {
		.arr = (pair*)malloc(length * sizeof(pair)),
        .top_idx = -1,
	};


    int64_t joint_count = 0;
	int32_t current_count = 1;
    a.arr[0].val = 0;
	a.arr[0].count = 1;
    a.top_idx = 0;
    for (int32_t i = 1; i < length; i += 1) {
		current_count = 1;
        while (!is_empty(a) && arr[peek(a)] < arr[i]) {
			joint_count += 1;
			pop(&a);
        }
		if (!is_empty(a)) {
			if (arr[peek(a)] == arr[i]) {
				joint_count += a.arr[a.top_idx].count;
				current_count = a.arr[a.top_idx].count + 1;

				if (a.top_idx > 0) {
					joint_count += 1;	
				}
			} else if (arr[peek(a)] > arr[i]) {
				joint_count += 1;
			}

        }
        push(&a, i, current_count);
    }

	return joint_count;
}
int32_t main(void) {
	int32_t n;
	scanf("%d", &n);
	int32_t arr[n];
	for (int32_t i = 0; i < n; i += 1) {
		scanf("%d", arr + i);
	}
	int64_t joint_count = get_joint_count(arr, n);
	printf("%ld\n", joint_count);
	
	return 0;
}
```
